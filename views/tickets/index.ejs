<%- include('../includes/head.ejs') %>
<%- include('../includes/navigation.ejs') %>   
    <body onload="toggleModal()">
        <% if (normMessage) { %>
            <div class="user-message "><%= normMessage %></div>
        <% } %>


        <div class="tickets">
            <div class="tickets__main">
                <h4 class="tickets__main__header">Purchase Tickets</h4>
                <p>Order tickets for the Royal Airforce vs British Army rugby match! To be played at kingsholm on Saturday 4 April kicking off at 3pm. </p>
                <div class="tickets__main__schedule">
                    <svg viewBox="0 0 24 24" fill="#303030" width="24px" height="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V10h16v11zm0-13H4V5h16v3z"/></svg>                
                    <p style="margin-right: 20px">4th April 2020</p>
                    <svg viewBox="0 0 24 24" fill="#303030" width="24px" height="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
                    <p>3:00pm</p>
                </div>
                <ul class="tickets__main__list">
                    <h4>Club Members and Members of the Forces:</h4>
                    <li>
                        <p>Seating Ticket</p>
                        <p>£15.00</p>
                        <div class="tickets__main__input-div">
                            <form action="/" method="POST" class="form-add">
                                <input name="qty" type="number" step="1" value="1" min="1">
                                <input type="hidden" name="itemId" value=1>
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <button id="add" type="submit">
                                    <svg fill="#bd0010" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 11 7 L 11 11 L 7 11 L 7 13 L 11 13 L 11 17 L 13 17 L 13 13 L 17 13 L 17 11 L 13 11 L 13 7 L 11 7 z"/></svg>                                
                                </button>
                            </form>
                        </div>
                    </li>
                    <li>
                        <p>Standing Ticket</p>
                        <p>£10.00</p>
                        <div class="tickets__main__input-div">
                            <form action="/" method="POST" class="form-add">
                                <input name="qty" type="number" step="1" value="1" min="1">
                                <input type="hidden" name="itemId" value=2>
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <button id="add" type="submit">
                                    <svg fill="#bd0010" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 11 7 L 11 11 L 7 11 L 7 13 L 11 13 L 11 17 L 13 17 L 13 13 L 17 13 L 17 11 L 13 11 L 13 7 L 11 7 z"/></svg>                                
                                </button>
                            </form>
                        </div>
                    </li>

                    <h4>Non-Member Prices:</h4>
                    <li>
                        <p>Seating Ticket</p>
                        <p>£20.00</p>
                        <div class="tickets__main__input-div">
                            <form action="/" method="POST" class="form-add">
                                <input name="qty" type="number" step="1" value="1" min="1">
                                <input type="hidden" name="itemId" value=3>
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <button id="add" type="submit">
                                    <svg fill="#bd0010" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 11 7 L 11 11 L 7 11 L 7 13 L 11 13 L 11 17 L 13 17 L 13 13 L 17 13 L 17 11 L 13 11 L 13 7 L 11 7 z"/></svg>                                
                                </button>
                            </form>
                        </div>
                    </li>
                    <li>
                        <p>Standing Ticket</p>
                        <p>£15.00</p>
                        <div class="tickets__main__input-div">
                            <form action="/" method="POST" class="form-add">
                                <input name="qty" type="number" step="1" value="1" min="1">
                                <input type="hidden" name="itemId" value=4>
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <button id="add" type="submit">
                                    <svg fill="#bd0010" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 11 7 L 11 11 L 7 11 L 7 13 L 11 13 L 11 17 L 13 17 L 13 13 L 17 13 L 17 11 L 13 11 L 13 7 L 11 7 z"/></svg>                                
                                </button>
                            </form>
                        </div>
                    </li>
                    <h4>Junior Tickets:</h4>
                    <li>
                        <p>Junior Ticket</p>
                        <p>£1.00</p>
                        <div class="tickets__main__input-div">
                            <form action="/" method="POST" class="form-add">
                                <input name="qty" type="number" step="1" value="1" min="1">
                                <input type="hidden" name="itemId" value=5>
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                    <button id="add" type="submit">
                                    <svg fill="#bd0010" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 11 7 L 11 11 L 7 11 L 7 13 L 11 13 L 11 17 L 13 17 L 13 13 L 17 13 L 17 11 L 13 11 L 13 7 L 11 7 z"/></svg>                                
                                </button>
                            </form>
                        </div>
                    </li>
                </ul>
            </div>
            
            <div class="tickets__side">
                <form action="/cart" method="POST">
                    <h4>Added Items</h4>
                    <ul class="tickets__side__form">
                        <% if (items.length > 0) { %>
                            <% items.forEach(item => { %>
                                <li>
                                    <input name="itemTier" type="text" readonly value="<%= item.tier %>">
                                    <input name="qty" type="number" readonly value="<%= item.qty %>">
                                    £ <input name="price" type="number" step="0.01" readonly value="<%= item.price.toFixed(2) %>">
                                    <input type="hidden" value="<%= item.id %>">
                                    <button type="button" onclick="deleteItem('<%= item.id %>')">
                                        <svg fill="#747474" viewBox="0 0 30 30" width="13px" height="13px"> <path d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"/></svg>
                                    </button>
                                </li>
                            <% }) %>
                            <div class="tickets__side__total">
                                <p>Total: £<%= total %></p>
                            </div>
                            <div class="tickets__side-checkout">
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>" id="csrf">
                                <button class="checkout-btn" type="submit">Checkout Cart<svg fill="#007900" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 16.292969 8.2929688 L 10 14.585938 L 7.7070312 12.292969 L 6.2929688 13.707031 L 10 17.414062 L 17.707031 9.7070312 L 16.292969 8.2929688 z"/></svg>
                                </button>
                            </div>

                        <% } else { %>
                            <li>
                                <p style="color:#303030">No Items added</p>
                            </li>
                            <div class="tickets__side__total">
                                <p>Total: £<%= total %></p>
                            </div>
                            <!-- <div class="tickets__side-checkout-inactive">
                                <button class="checkout-btn" type="submit">Checkout Cart<svg fill="#007900" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 16.292969 8.2929688 L 10 14.585938 L 7.7070312 12.292969 L 6.2929688 13.707031 L 10 17.414062 L 17.707031 9.7070312 L 16.292969 8.2929688 z"/></svg>
                                </button>
                            </div> -->
                        <% } %>
                    </ul>
                </form>
            </div>
        </div>  <!--end of parent .tickets div-->
        
        <div class="modal">
            <div class="tickets__side modal-contents">
                <span class="close-button" id="close-button">&times;</span>
                <form action="/cart" method="POST">
                    <h4>Added Items</h4>
                    <ul class="tickets__side__form">
                        <% if (items.length > 0) { %>
                            <% items.forEach(item => { %>
                                <li>
                                    <input name="itemTier" type="text" readonly value="<%= item.tier %>">
                                    <input name="qty" type="number" readonly value="<%= item.qty %>">
                                    £ <input name="price" type="number" step="0.01" readonly value="<%= item.price.toFixed(2) %>">
                                    <input type="hidden" value="<%= item.id %>">
                                    <button type="button" onclick="deleteItem('<%= item.id %>')">
                                        <svg fill="#747474" viewBox="0 0 30 30" width="13px" height="13px"> <path d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"/></svg>
                                    </button>
                                </li>
                            <% }) %>
                            <div class="tickets__side__total">
                                <p>Total: £<%= total %></p>
                            </div>
                            <div class="tickets__side-checkout">
                                <input type="hidden" name="_csrf" value="<%= csrfToken %>" id="csrf">
                                <button class="checkout-btn" type="submit">Checkout Cart<svg fill="#007900" viewBox="0 0 24 24" width="24px" height="24px"><path d="M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 16.292969 8.2929688 L 10 14.585938 L 7.7070312 12.292969 L 6.2929688 13.707031 L 10 17.414062 L 17.707031 9.7070312 L 16.292969 8.2929688 z"/></svg>
                                </button>
                            </div>

                        <% } else { %>
                            <li>
                                <p style="color:#303030">No Items added</p>
                            </li>
                            <div class="tickets__side__total">
                                <p>Total: £<%= total %></p>
                            </div>
                        <% } %>
                    </ul>
                </form>
            </div><!--tickets__side modal-contents-->
        </div><!--modal div-->

<%- include('../includes/footer.ejs') %>
